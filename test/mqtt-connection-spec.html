<!doctype html>
<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <title>mqtt-connection-basic</title>

  <script src="../../webcomponentsjs/webcomponents.min.js"></script>

  <script src="../../web-component-tester/browser.js"></script>

  <!-- Step 1: import the element to test -->
  <link rel="import" href="../mqtt-elements.html">

</head>
<body>

<mqtt-connection auto></mqtt-connection>
<mqtt-connection id="noAuto"></mqtt-connection>

<script>
  //  Setp 2: get the element
  var mqttElement =  document.querySelector('mqtt-connection');
  var mqttDisabledAuto =  document.querySelector('mqtt-connection#noAuto');

  suite('mqtt-connection-spec', function() {
    //  Setp 3: Test the element
    test('Element is not null', function() {
      assert.isNotNull(mqttElement);
      assert.notTypeOf(mqttElement, 'undefined');
    });

    test('mqtt-connection.clean is boolean', function() {
      assert.isBoolean(mqttElement.clean, 'mqtt-connection.options.clean should be a number greater than 0');
      assert.isTrue(mqttElement.clean);
    });

    test('mqtt-connection.connected is boolean', function() {
      assert.isBoolean(mqttElement.connected, 'mqtt-connection.connected should be a boolean');
      assert.isFalse(mqttElement.connected);
    });

    test('mqtt-connection.disconnecting is booelan and false', function() {
      assert.isBoolean(mqttElement.disconnecting, 'mqtt-connection.disconnecting should be a boolean');
      assert.isFalse(mqttElement.disconnecting);
    });

    test('mqtt-connection.auto is boolean and false', function() {
      assert.isBoolean(mqttElement.auto, 'mqtt-connection.auto should be a boolean');
      assert.isTrue(mqttElement.auto);
    });

    test('mqtt-connection#auto.auto is boolean', function() {
      assert.isBoolean(mqttDisabledAuto.auto, 'mqtt-connection.auto should be a boolean');
      assert.isFalse(mqttDisabledAuto.auto);
    });

    test('mqtt-connection.auto is false', function() {
      assert.isBoolean(mqttElement.auto, 'mqtt-connection.auto should be a boolean');
      assert.isTrue(mqttElement.auto);
      mqttElement.auto = false;
      assert.isFalse(mqttElement.auto);
    });

    test('mqtt-connection.clientIdPrefix is String', function() {
      assert.typeOf(mqttElement.clientIdPrefix, 'string', 'mqtt-connection.clientIdPrefix should be a String');
      assert.strictEqual(mqttElement.clientIdPrefix, 'mqttjs_', 'On a new instance of <mqtt-connection> the clientIdPrefix should be mqttjs_');
    });

    test('mqtt-connection.options.protocolId is a String', function() {
      assert.typeOf(mqttElement.options.protocolId, 'string', 'mqtt-connection.options.protocolId should be a String');
      assert.strictEqual(mqttElement.options.protocolId, 'MQTT', 'On a new instance of <mqtt-connection> the protocolId should be MQIsdp');
    });

    test('mqtt-connection.options.protocolVersion is a number', function() {
      assert.isNumber(mqttElement.options.protocolVersion, 'mqtt-connection.options.protocolVersion should be a number greater than 0');
      assert.strictEqual(mqttElement.options.protocolVersion, 4, 'On a new instance of <mqtt-connection> the protocolVersion should be 4');
    });

    test('mqtt-connection.options.reconnectPeriod is a number', function() {
      assert.isNumber(mqttElement.options.reconnectPeriod, 'mqtt-connection.options.reconnectPeriod should be a number greater than 0');
      assert.strictEqual(mqttElement.options.reconnectPeriod, 1000, 'On a new instance of <mqtt-connection> the reconnectPeriod should be 4');
    });

    test('mqtt-connection.options.keepalive is a number', function() {
      assert.isNumber(mqttElement.options.keepalive, 'mqtt-connection.options.keepalive should be a number greater than 0');
      assert.strictEqual(mqttElement.options.keepalive,10);
    });

    test('mqtt-connection.options.clientId is a String', function() {
      assert.typeOf(mqttElement.options.clientId, 'string', 'mqtt-connection.options.clientId should be a string');
    });

    test('mqtt-connection.options.will should be undefined', function() {
      assert.typeOf(mqttElement.options.will, 'undefined', 'mqtt-connection.options.will should be a undefined on a new instance of <mqtt-connection>');
    });

    test('mqtt-connection.options.encoding is a String', function() {
      assert.typeOf(mqttElement.options.encoding, 'string', 'mqtt-connection.options.encoding should be a string');
    });

    test('mqtt-connection.options.username should be undefined', function() {
      assert.typeOf(mqttElement.options.username, 'undefined', 'mqtt-connection.options.username should be undefined');
    });

    test('mqtt-connection.options.password should be undefined', function() {
      assert.typeOf(mqttElement.options.password, 'undefined', 'mqtt-connection.options.password should be undefined');
    });

    test('mqtt-connection.url is a String', function() {
      assert.typeOf(mqttElement.url, 'string', 'mqtt-connection.url should be a string');
    });
  });
</script>

</body>
</html>
